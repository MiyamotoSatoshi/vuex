{"version":3,"sources":["../../src/mixins/overlayable.js"],"names":[],"mappings":"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","sourcesContent":["import '../stylus/components/_overlay.styl'\n\n// Utils\nimport { keyCodes } from '../util/helpers'\n\n/* @vue/component */\nexport default {\n  name: 'overlayable',\n\n  props: {\n    hideOverlay: Boolean\n  },\n\n  data () {\n    return {\n      overlay: null,\n      overlayOffset: 0,\n      overlayTimeout: null,\n      overlayTransitionDuration: 500 + 150 // transition + delay\n    }\n  },\n\n  beforeDestroy () {\n    this.removeOverlay()\n  },\n\n  methods: {\n    genOverlay () {\n      // If fn is called and timeout is active\n      // or overlay already exists\n      // cancel removal of overlay and re-add active\n      if ((!this.isActive || this.hideOverlay) ||\n        (this.isActive && this.overlayTimeout) ||\n        this.overlay\n      ) {\n        clearTimeout(this.overlayTimeout)\n\n        return this.overlay &&\n          this.overlay.classList.add('v-overlay--active')\n      }\n\n      this.overlay = document.createElement('div')\n      this.overlay.className = 'v-overlay'\n\n      if (this.absolute) this.overlay.className += ' v-overlay--absolute'\n\n      this.hideScroll()\n\n      const parent = this.absolute\n        ? this.$el.parentNode\n        : document.querySelector('[data-app]')\n\n      parent && parent.insertBefore(this.overlay, parent.firstChild)\n\n      // eslint-disable-next-line no-unused-expressions\n      this.overlay.clientHeight // Force repaint\n      requestAnimationFrame(() => {\n        // https://github.com/vuetifyjs/vuetify/issues/4678\n        if (!this.overlay) return\n\n        this.overlay.className += ' v-overlay--active'\n\n        if (this.activeZIndex !== undefined) {\n          this.overlay.style.zIndex = this.activeZIndex - 1\n        }\n      })\n\n      return true\n    },\n    removeOverlay () {\n      if (!this.overlay) {\n        return this.showScroll()\n      }\n\n      this.overlay.classList.remove('v-overlay--active')\n\n      this.overlayTimeout = setTimeout(() => {\n        // IE11 Fix\n        try {\n          if (this.overlay && this.overlay.parentNode) {\n            this.overlay.parentNode.removeChild(this.overlay)\n          }\n          this.overlay = null\n          this.showScroll()\n        } catch (e) { console.log(e) }\n\n        clearTimeout(this.overlayTimeout)\n        this.overlayTimeout = null\n      }, this.overlayTransitionDuration)\n    },\n    /**\n     * @param {Event} e\n     * @returns void\n     */\n    scrollListener (e) {\n      if (e.type === 'keydown') {\n        if (\n          ['INPUT', 'TEXTAREA', 'SELECT'].includes(e.target.tagName) ||\n          // https://github.com/vuetifyjs/vuetify/issues/4715\n          e.target.isContentEditable\n        ) return\n\n        const up = [keyCodes.up, keyCodes.pageup]\n        const down = [keyCodes.down, keyCodes.pagedown]\n\n        if (up.includes(e.keyCode)) {\n          e.deltaY = -1\n        } else if (down.includes(e.keyCode)) {\n          e.deltaY = 1\n        } else {\n          return\n        }\n      }\n\n      if (e.target === this.overlay ||\n        (e.type !== 'keydown' && e.target === document.body) ||\n        this.checkPath(e)) e.preventDefault()\n    },\n    hasScrollbar (el) {\n      if (!el || el.nodeType !== Node.ELEMENT_NODE) return false\n\n      const style = window.getComputedStyle(el)\n      return ['auto', 'scroll'].includes(style['overflow-y']) && el.scrollHeight > el.clientHeight\n    },\n    shouldScroll (el, delta) {\n      if (el.scrollTop === 0 && delta < 0) return true\n      return el.scrollTop + el.clientHeight === el.scrollHeight && delta > 0\n    },\n    isInside (el, parent) {\n      if (el === parent) {\n        return true\n      } else if (el === null || el === document.body) {\n        return false\n      } else {\n        return this.isInside(el.parentNode, parent)\n      }\n    },\n    /**\n     * @param {Event} e\n     * @returns boolean\n     */\n    checkPath (e) {\n      const path = e.path || this.composedPath(e)\n      const delta = e.deltaY || -e.wheelDelta\n\n      if (e.type === 'keydown' && path[0] === document.body) {\n        const dialog = this.$refs.dialog\n        const selected = window.getSelection().anchorNode\n        if (this.hasScrollbar(dialog) && this.isInside(selected, dialog)) {\n          return this.shouldScroll(dialog, delta)\n        }\n        return true\n      }\n\n      for (let index = 0; index < path.length; index++) {\n        const el = path[index]\n\n        if (el === document) return true\n        if (el === document.documentElement) return true\n        if (el === this.$refs.content) return true\n\n        if (this.hasScrollbar(el)) return this.shouldScroll(el, delta)\n      }\n\n      return true\n    },\n    /**\n     * Polyfill for Event.prototype.composedPath\n     * @param {Event} e\n     * @returns Element[]\n     */\n    composedPath (e) {\n      if (e.composedPath) return e.composedPath()\n\n      const path = []\n      let el = e.target\n\n      while (el) {\n        path.push(el)\n\n        if (el.tagName === 'HTML') {\n          path.push(document)\n          path.push(window)\n\n          return path\n        }\n\n        el = el.parentElement\n      }\n    },\n    hideScroll () {\n      if (this.$vuetify.breakpoint.smAndDown) {\n        document.documentElement.classList.add('overflow-y-hidden')\n      } else {\n        window.addEventListener('wheel', this.scrollListener)\n        window.addEventListener('keydown', this.scrollListener)\n      }\n    },\n    showScroll () {\n      document.documentElement.classList.remove('overflow-y-hidden')\n      window.removeEventListener('wheel', this.scrollListener)\n      window.removeEventListener('keydown', this.scrollListener)\n    }\n  }\n}\n"],"sourceRoot":""}