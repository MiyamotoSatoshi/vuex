{"version":3,"sources":["../../../src/components/VTimePicker/VTimePicker.js"],"names":[],"mappings":"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","sourcesContent":["// Components\nimport VTimePickerTitle from './VTimePickerTitle'\nimport VTimePickerClock from './VTimePickerClock'\n\n// Mixins\nimport Picker from '../../mixins/picker'\n\n// Utils\nimport { createRange } from '../../util/helpers'\nimport pad from '../VDatePicker/util/pad'\n\nconst rangeHours24 = createRange(24)\nconst rangeHours12am = createRange(12)\nconst rangeHours12pm = rangeHours12am.map(v => v + 12)\nconst rangeMinutes = createRange(60)\n\n/* @vue/component */\nexport default {\n  name: 'v-time-picker',\n\n  mixins: [Picker],\n\n  props: {\n    allowedHours: Function,\n    allowedMinutes: Function,\n    format: {\n      type: String,\n      default: 'ampm',\n      validator (val) {\n        return ['ampm', '24hr'].includes(val)\n      }\n    },\n    min: String,\n    max: String,\n    readonly: Boolean,\n    scrollable: Boolean,\n    value: null\n  },\n\n  data () {\n    return {\n      inputHour: null,\n      inputMinute: null,\n      period: 'am',\n      selectingHour: true\n    }\n  },\n\n  computed: {\n    isAllowedHourCb () {\n      if (!this.min && !this.max) return this.allowedHours\n\n      const minHour = this.min ? this.min.split(':')[0] : 0\n      const maxHour = this.max ? this.max.split(':')[0] : 23\n\n      return val => {\n        return val >= minHour * 1 &&\n          val <= maxHour * 1 &&\n          (!this.allowedHours || this.allowedHours(val))\n      }\n    },\n    isAllowedMinuteCb () {\n      const isHourAllowed = !this.allowedHours || this.allowedHours(this.inputHour)\n      if (!this.min && !this.max) {\n        return isHourAllowed ? this.allowedMinutes : () => false\n      }\n\n      const [minHour, minMinute] = this.min ? this.min.split(':') : [0, 0]\n      const [maxHour, maxMinute] = this.max ? this.max.split(':') : [23, 59]\n      const minTime = minHour * 60 + minMinute * 1\n      const maxTime = maxHour * 60 + maxMinute * 1\n\n      return val => {\n        const time = 60 * this.inputHour + val\n        return time >= minTime &&\n          time <= maxTime &&\n          isHourAllowed &&\n          (!this.allowedMinutes || this.allowedMinutes(val))\n      }\n    },\n    isAmPm () {\n      return this.format === 'ampm'\n    }\n  },\n\n  watch: {\n    value: 'setInputData'\n  },\n\n  mounted () {\n    this.setInputData(this.value)\n  },\n\n  methods: {\n    emitValue () {\n      if (this.inputHour != null && this.inputMinute != null) {\n        this.$emit('input', `${pad(this.inputHour)}:${pad(this.inputMinute)}`)\n      }\n    },\n    setPeriod (period) {\n      this.period = period\n      if (this.inputHour != null) {\n        const newHour = this.inputHour + (period === 'am' ? -12 : 12)\n        this.inputHour = this.firstAllowed('hour', newHour)\n        this.emitValue()\n      }\n    },\n    setInputData (value) {\n      if (value == null || value === '') {\n        this.inputHour = null\n        this.inputMinute = null\n        return\n      }\n\n      if (value instanceof Date) {\n        this.inputHour = value.getHours()\n        this.inputMinute = value.getMinutes()\n      } else {\n        const [, hour, minute, , period] = value.trim().toLowerCase().match(/^(\\d+):(\\d+)(:\\d+)?([ap]m)?$/, '') || []\n\n        this.inputHour = period ? this.convert12to24(parseInt(hour, 10), period) : parseInt(hour, 10)\n        this.inputMinute = parseInt(minute, 10)\n      }\n\n      this.period = this.inputHour < 12 ? 'am' : 'pm'\n    },\n    convert24to12 (hour) {\n      return hour ? ((hour - 1) % 12 + 1) : 12\n    },\n    convert12to24 (hour, period) {\n      return hour % 12 + (period === 'pm' ? 12 : 0)\n    },\n    onInput (value) {\n      if (this.selectingHour) {\n        this.inputHour = this.isAmPm ? this.convert12to24(value, this.period) : value\n      } else {\n        this.inputMinute = value\n      }\n      this.emitValue()\n    },\n    onChange () {\n      if (!this.selectingHour) {\n        this.$emit('change', this.value)\n      } else {\n        this.selectingHour = false\n      }\n    },\n    firstAllowed (type, value) {\n      const allowedFn = type === 'hour' ? this.isAllowedHourCb : this.isAllowedMinuteCb\n      if (!allowedFn) return value\n\n      // TODO: clean up\n      const range = type === 'minute'\n        ? rangeMinutes\n        : (this.isAmPm\n          ? (value < 12\n            ? rangeHours12am\n            : rangeHours12pm)\n          : rangeHours24)\n      const first = range.find(v => allowedFn((v + value) % range.length + range[0]))\n      return ((first || 0) + value) % range.length + range[0]\n    },\n    genClock () {\n      return this.$createElement(VTimePickerClock, {\n        props: {\n          allowedValues: this.selectingHour ? this.isAllowedHourCb : this.isAllowedMinuteCb,\n          color: this.color,\n          dark: this.dark,\n          double: this.selectingHour && !this.isAmPm,\n          format: this.selectingHour ? (this.isAmPm ? this.convert24to12 : val => val) : val => pad(val, 2),\n          light: this.light,\n          max: this.selectingHour ? (this.isAmPm && this.period === 'am' ? 11 : 23) : 59,\n          min: this.selectingHour && this.isAmPm && this.period === 'pm' ? 12 : 0,\n          readonly: this.readonly,\n          scrollable: this.scrollable,\n          size: this.width - ((!this.fullWidth && this.landscape) ? 80 : 20),\n          step: this.selectingHour ? 1 : 5,\n          value: this.selectingHour ? this.inputHour : this.inputMinute\n        },\n        on: {\n          input: this.onInput,\n          change: this.onChange\n        },\n        ref: 'clock'\n      })\n    },\n    genPickerBody () {\n      return this.$createElement('div', {\n        staticClass: 'v-time-picker-clock__container',\n        key: this.selectingHour\n      }, [this.genClock()])\n    },\n    genPickerTitle () {\n      return this.$createElement(VTimePickerTitle, {\n        props: {\n          ampm: this.isAmPm,\n          hour: this.inputHour,\n          minute: this.inputMinute,\n          period: this.period,\n          readonly: this.readonly,\n          selectingHour: this.selectingHour\n        },\n        on: {\n          'update:selectingHour': value => (this.selectingHour = value),\n          'update:period': this.setPeriod\n        },\n        ref: 'title',\n        slot: 'title'\n      })\n    }\n  },\n\n  render () {\n    return this.genPicker('v-picker--time')\n  }\n}\n"],"sourceRoot":""}