@import '../bootstrap'
@import '../theme'

v-text-field($material)
  &:not(.v-input--has-state)
    .v-input__slot:before
      background-color: $material.input-bottom-line

    &:hover
      .v-input__slot:before
        background-color: $material.text.primary

  &.v-input--is-disabled
    .v-input__slot:before
      background-color: transparent
      background-image: linear-gradient(
        to right,
        $material.text.disabled 0,
        $material.text.disabled 33%,
        transparent 0
      )

  &--solo
    background: $material.cards

  &--solo-inverted
    background: rgba($material.inputs.solo-inverted)

    &.v-input--is-focused
      background: rgba($material.inputs.solo-inverted-focused)

  &--box
    background: $material.buttons.focused-alt

  &--outline
    border: 2px solid $material.text.secondary
    background: transparent !important

  &__prefix,
  &__suffix
    color: $material.text.secondary

  .v-label
    left: initial
    right: 0 !important

v-text-field-rtl()
  .v-label
    transform-origin: top right

  &--enclosed
    .v-input__append-outer
      margin-left: 0
      margin-right: 16px

    .v-input__prepend-outer
      margin-left: 16px
      margin-right: 0

theme(v-text-field, "v-text-field")
rtl(v-text-field-rtl, "v-text-field")

.v-text-field
  input,
  textarea // could/should probably be in textarea
    flex: 1 1 auto
    padding: 8px 0 8px
    line-height: 1
    max-width: 100%
    width: auto

  .v-input__append-inner
    display: inline-flex
    margin-left: auto
    line-height: 1

  .v-counter
    white-space: nowrap

  .v-label
    height: 20px
    line-height: 20px
    max-width: 90%
    overflow: hidden
    text-overflow: ellipsis
    top: 6px // equal to the margin top of icons
    transform-origin: top left
    white-space: nowrap

    &--active
      max-width: 100%
      transform: translateY(-90%) scale(.75)

  .v-input__slot
    &:before,
    &:after
      bottom: -1px
      content: ''
      left: 0
      position: absolute
      transition: $primary-transition
      width: 100%

    &:before
      background-color: transparent
      background-position: bottom
      background-size: 3px 1px
      background-repeat: repeat-x
      height: 1px

    &:after
      background-color: currentColor
      height: 2px
      transform: scaleX(0)

  &__details
    display: flex
    flex: 1 0 auto
    max-width: 100%

  &__prefix
    padding: 8px 4px 8px 0

  &__suffix
    padding: 8px 0 8px 4px

  &__slot
    display: flex
    flex: 1 1 auto
    height: 100%
    position: relative

  &--box,
  &--outline
    border-radius: 4px
    cursor: pointer
    position: relative

    input
      margin-top: 8px

    .v-label
      top: 2px

      &--active
        transform: translateY(-40%) scale(.75)

    .v-input__control
      min-height: 56px
      padding-top: 16px

      .v-input__slot
        position: static

        &:before,
        &:after
          display: none

  &--box
    input
      cursor: pointer

    &:after
      background-color: currentColor
      bottom: 0
      border-bottom-left-radius: 2px
      border-bottom-right-radius: 2px
      content: ''
      height: 2px
      left: 0
      position: absolute
      transform: scaleX(0)
      transition-delay: 2s
      transition: $primary-transition
      width: 100%

    &.v-input--is-focused:after
      transform: scaleX(1)

    .v-input__prepend-outer,
    .v-input__append-outer
      margin-top: 16px

  &--enclosed,
  &--box
    .v-input__append-inner
      align-self: flex-start

  &--enclosed
    margin-top: 16px
    padding: 0 16px

    .v-input__slot
      margin-bottom: 0 // normally for messages

    .v-input__append-outer
      margin-right: 0

    .v-input__prepend-outer
      margin-left: 0

    .v-text-field__details
      bottom: -22px
      pointer-events: none
      position: absolute
      width: 100%

    &:not(.v-text-field--box)
      .v-input__slot
        &:before,
        &:after
          display: none

  &--outline
    &.v-input--is-focused
      border: 2px solid currentColor
      transition: border $primary-transition

    .v-input__prepend-outer,
    .v-input__append-outer
      align-self: flex-start
      margin-top: 16px

    .v-input__append-inner
      align-self: flex-start

  &.v-text-field--solo,
  &.v-text-field--box.v-text-field--single-line,
  &.v-text-field--outline.v-text-field--single-line
    input
      margin: 0

    .v-label
      top: calc(50% - 10px)

    .v-input__control
      align-items: center
      padding: 0

    .v-input__prepend-outer,
    .v-input__append-inner,
    .v-input__append-outer
      align-self: center
      margin-bottom: 0
      margin-top: 0

  &.v-text-field--solo
    align-items: center
    elevation(2)

    .v-input__control
      min-height: 48px

  &.v-input--is-focused
    .v-input__slot:after
      transform: scaleX(1)

  &.v-input--has-state
    .v-input__slot:before
      background-color: currentColor
